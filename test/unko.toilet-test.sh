#!/bin/bash

__THIS_DIR="$(cd "$(dirname "${BASH_SOURCE[0]:-${(%):-%N}}")"; pwd)"

TARGET_COMMAND="${__THIS_DIR}/../bin/unko.toilet"

# message [name] [status]
# statusが0ならOKを出力してreturn、 それ以外ならNGを出力してexit 1
function message() {
  name="$1"
  status="$2"
  expect="$3"
  
  [[ "$status" == "$3" ]] && echo "[OK] $name" && return 0

  echo "[NG] $name" 
  exit 1
}

function EQ() {
  name="$1"
  expect="$2"
  actual="$3"

  [[ "$expect" == "$actual" ]] 

  message $name $? 0
}

function OK() {
  name="$1"
  shift
  cmd="$@"

  $cmd &> /dev/null
  message $name $? 0
}

function NG() {
  name="$1"
  shift
  cmd="$@"

  $cmd &> /dev/null
  message $name $? 1
}

OK "普通に実行" "$TARGET_COMMAND"
NG "おかしなオプション--お菓子" "$TARGET_COMMAND --お菓子"

HANAGE_BASE64="CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgIPCfkqkgICAgICAgICAg
ICAgICAgICDwn5KpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5KpICAgIPCfkqkg
IPCfkqkgICAgCiAg8J+SqSAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICDwn5KpICDw
n5KpICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAg8J+SqSAg8J+SqSAg8J+SqSAgICAKICAg
IPCfkqkgIPCfkqkgICAgICDwn5Kp8J+SqfCfkqkgICAgICAgIPCfkqnwn5Kp8J+SqfCfkqnwn5Kp
ICDwn5Kp8J+SqSAgICAgICAgICAgICAg8J+SqSAgICAgICAgICDwn5Kp8J+SqfCfkqkgICAgICAK
ICAgIPCfkqkgICAg8J+SqfCfkqnwn5Kp8J+SqSAgICAgICAgICAgICAgICDwn5KpICAgICAgICDw
n5Kp8J+SqSAgICAgICAgICAgIPCfkqkgIPCfkqnwn5Kp8J+SqfCfkqnwn5KpICAgICAgICAgIAog
IPCfkqkgICAgICAgICAgICDwn5KpICAgICAgICAgICAgICAgIPCfkqkgICAgICDwn5KpICAgICAg
ICAgICAgICDwn5KpICAgICAgICAgICAg8J+SqSAgICAgICAgICAKICDwn5KpICAgICAgICAgICAg
8J+SqSAgICAgICAgICAgICAg8J+SqSAgICAgICAg8J+SqSAgICAgICAgICAgICAg8J+SqSAgICAg
ICAgICAgIPCfkqkgICAgICAgICAgCiAg8J+SqSAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAg
IPCfkqkgICAgICAgIPCfkqkgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICDwn5KpICAgICAg
ICAgIAogIPCfkqkgICAgICDwn5Kp8J+SqfCfkqnwn5KpICAgICAgICAgICAg8J+SqSAgICDwn5Kp
8J+SqfCfkqnwn5KpICAgICAgICAgICAgICDwn5KpICAgICAgICAgICAg8J+SqSAgICAgICAgICAK
ICDwn5KpICDwn5Kp8J+SqSAgICAgIPCfkqnwn5KpICAgICAgICAgICAgICDwn5KpICAgICAg8J+S
qfCfkqkgICAgICAgICAgICAgIPCfkqnwn5KpICAgICAg8J+SqSAgICAgICAgICAgIAogIPCfkqnw
n5KpICDwn5KpICAgICAg8J+SqSAg8J+SqSAgICAgICAgICAgIPCfkqkgICAgICDwn5KpICDwn5Kp
ICAgICAgICAgICAg8J+SqSAgICAgICAg8J+SqSAgICAgICAgICAgIAogICAg8J+SqSAgICDwn5Kp
8J+SqfCfkqkgICAgICAgICAgICAgICAgICAgIPCfkqnwn5Kp8J+SqSAgICAgICAgICAgICAgICAg
ICAgICAgICAg8J+SqSAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCg=="

EQ "stdinから" "$(echo はなげ|$TARGET_COMMAND|base64)" "$HANAGE_BASE64"
EQ "引数に" "$($TARGET_COMMAND はなげ|base64)" "$HANAGE_BASE64"

EQ "flip" "$($TARGET_COMMAND --flip|base64)" "LS1maWx0ZXIgZmxpcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgIAogICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
8J+SqfCfkqkgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAg8J+SqSAgICAgICAgICAgICAg
ICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAg
ICAgIPCfkqnwn5Kp8J+SqfCfkqnwn5KpICAgICAgICAgICAgICAgICAgICAgICAg8J+SqSAgICAg
ICAgICAgICAgICAgICAgICDwn5Kp8J+SqfCfkqnwn5KpICAgICAgICAKICAgICAgICAgICAg8J+S
qSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICAgIPCf
kqkgICAgICAgIPCfkqnwn5KpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5KpICAgICAgICAg
ICAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIPCfkqkg
ICAgICAgICAgICAgICAgICAgIPCfkqnwn5Kp8J+SqSAgICAgICAgICAgICAgICDwn5KpICAgICAg
ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAgIPCf
kqkgICAg8J+SqSAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgIAogICAgICAgIPCf
kqkgICAgICAgICAg8J+SqSAgICAgICAgICAgIPCfkqkgICAgICDwn5KpICAgICAg8J+SqSAgICAg
ICAgICAgICAgICDwn5KpICAgICAgICAgICAgICAKICAgICAgICAgIPCfkqnwn5Kp8J+SqfCfkqnw
n5KpICAgICAgICAgICAgICAgIPCfkqkgICAg8J+SqSAgICAgIPCfkqkgICAgICAgICAgICAgICAg
ICDwn5KpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
8J+SqfCfkqkgICAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgCiAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgCg=="

EQ "flop" "$($TARGET_COMMAND --flop|base64)" "LS1maWx0ZXIgZmxvcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAg8J+SqSAg
ICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAg8J+SqfCfkqkgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICDwn5KpICAgICAgICAgICAgICAgICAg8J+S
qSAgICAgIPCfkqkgICAg8J+SqSAgICAgICAgICAgICAgICDwn5Kp8J+SqfCfkqnwn5Kp8J+SqSAg
ICAgICAgICAKICAgICAgICAgICAgICDwn5KpICAgICAgICAgICAgICAgIPCfkqkgICAgICDwn5Kp
ICAgICAg8J+SqSAgICAgICAgICAgIPCfkqkgICAgICAgICAg8J+SqSAgICAgICAgCiAgICAgICAg
ICAgICAg8J+SqSAgICAgICAgICAgICAgICAgIPCfkqkgICAg8J+SqSAgICAgICAgICAgICAgICAg
IPCfkqkgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICDwn5KpICAgICAgICAg
ICAgICAgIPCfkqnwn5Kp8J+SqSAgICAgICAgICAgICAgICAgICAg8J+SqSAgICAgICAgICAgICAg
ICAgICAgICAKICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICDwn5KpICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg
8J+SqSAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgCiAgICDwn5Kp8J+SqSAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAg
ICAg8J+SqSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAKICAg
ICAgICDwn5Kp8J+SqfCfkqnwn5KpICAgICAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAg
ICAgICAgICAgICAgICDwn5Kp8J+SqfCfkqnwn5Kp8J+SqSAgICAgICAgICAKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAgICAgICAgIPCfkqkg
ICAgICAgICAgICAgICAgICAgIAogICAgICAgICAg8J+SqfCfkqkgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAg
ICAg8J+SqSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgCg=="

EQ "180" "$($TARGET_COMMAND --180|base64)" "LS1maWx0ZXIgMTgwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAg8J+SqfCfkqkgICAgICAgICAg8J+SqSAgICAgICAgICAgICAg
ICAgIPCfkqkgICAgICAgICAgCiAgICAgICAgICDwn5Kp8J+SqfCfkqnwn5Kp8J+SqSAgICAgICAg
ICAgICAgICDwn5KpICAgIPCfkqkgICAgICDwn5KpICAgICAgICAgICAgICAgICAg8J+SqSAgICAg
ICAgICAgIAogICAgICAgIPCfkqkgICAgICAgICAg8J+SqSAgICAgICAgICAgIPCfkqkgICAgICDw
n5KpICAgICAg8J+SqSAgICAgICAgICAgICAgICDwn5KpICAgICAgICAgICAgICAKICAgICAgICAg
ICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICDwn5KpICAgIPCfkqkgICAgICAgICAg
ICAgICAgICDwn5KpICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgIPCfkqkgICAg
ICAgICAgICAgICAgICAgIPCfkqnwn5Kp8J+SqSAgICAgICAgICAgICAgICDwn5KpICAgICAgICAg
ICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg8J+S
qSAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5KpICAgICAgICAgICAgICAgICAg8J+SqSAg
ICAgICAgICAgICAgICAKICAgICAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIPCfkqkgICAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgIPCfkqnwn5KpICAgIAogICAg
ICAgICAg8J+SqfCfkqnwn5Kp8J+SqfCfkqkgICAgICAgICAgICAgICAgICAgICAgICDwn5KpICAg
ICAgICAgICAgICAgICAgICAgIPCfkqnwn5Kp8J+SqfCfkqkgICAgICAgIAogICAgICAgICAgICAg
ICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICAgICAgICDwn5KpICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5Kp8J+SqSAgICAgICAgICAKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICDwn5KpICAgICAgICAK"

EQ "right" "$($TARGET_COMMAND --right|base64)" "LS1maWx0ZXIgcmlnaHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICDwn5Kp8J+SqSAgICAgICAgICAgICAgICAKICAgICAgICAgICAg8J+SqfCfkqkgICAgICAgICAg
ICAgICAgICAgICAgICAgICAg8J+SqfCfkqkgICAg8J+SqfCfkqnwn5Kp8J+SqQogICAgICAgICAg
ICAgICAg8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5KpICAgICAgICAgICAgICAgIPCfkqnwn5KpICAg
IPCfkqnwn5KpICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAg8J+SqfCfkqnwn5Kp8J+S
qfCfkqnwn5Kp8J+SqfCfkqkgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAg8J+S
qfCfkqkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAg
ICAgICAgICAg8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqkgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5Kp8J+SqfCfkqnwn5Kp
8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqkgICAgICAgIAogICAgICAgICAgICDwn5Kp
8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgCiAgICAgICAgICAgIPCfkqnwn5Kp8J+SqfCfkqkgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAg8J+SqfCfkqkgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIPCfkqnw
n5Kp8J+SqfCfkqnwn5Kp8J+SqSAgICAgICAgICAgICAgICDwn5Kp8J+SqSAgICAgICAgCiAgICAg
ICAgICAgICAgICDwn5Kp8J+SqSAgICAgICAgICAgICAgICAgICAgICAgIPCfkqnwn5KpICAgICAg
ICAgICAgCiAgICAgICAgICAgICAgICDwn5Kp8J+SqSAgICAgICAgICAgICAgICAgICAg8J+SqfCf
kqnwn5Kp8J+SqSAgICAgICAgICAgIAogICAgICAgICAgICAgICAg8J+SqfCfkqnwn5Kp8J+SqSAg
ICAgICAgICAgICAgICAgICAg8J+SqfCfkqkgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo="


EQ "left" "$($TARGET_COMMAND --left|base64)" "LS1maWx0ZXIgbGVmdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgIPCfkqnwn5KpICAgICAgICAgICAgICAg
ICAgICDwn5Kp8J+SqfCfkqnwn5KpICAgICAgICAgICAgICAgIAogICAgICAgICAgICDwn5Kp8J+S
qfCfkqnwn5KpICAgICAgICAgICAgICAgICAgICDwn5Kp8J+SqSAgICAgICAgICAgICAgICAKICAg
ICAgICAgICAg8J+SqfCfkqkgICAgICAgICAgICAgICAgICAgICAgICDwn5Kp8J+SqSAgICAgICAg
ICAgICAgICAKICAgICAgICDwn5Kp8J+SqSAgICAgICAgICAgICAgICDwn5Kp8J+SqfCfkqnwn5Kp
8J+SqfCfkqkgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIPCfkqnwn5KpICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfkqnwn5Kp8J+SqfCfkqkgICAgICAgICAgICAK
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnw
n5Kp8J+SqSAgICAgICAgICAgIAogICAgICAgIPCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnw
n5Kp8J+SqfCfkqnwn5Kp8J+SqSAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIPCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5KpICAgICAg
ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCf
kqnwn5KpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIPCfkqnwn5Kp8J+SqfCf
kqnwn5Kp8J+SqfCfkqnwn5KpICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAg8J+SqfCf
kqkgICAg8J+SqfCfkqkgICAgICAgICAgICAgICAg8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5KpICAg
ICAgICAgICAgICAgIArwn5Kp8J+SqfCfkqnwn5KpICAgIPCfkqnwn5KpICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIPCfkqnwn5KpICAgICAgICAgICAgCiAgICAgICAgICAgICAgICDwn5Kp8J+S
qSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCg=="

EQ "border" "$($TARGET_COMMAND --border|base64)" "LS1maWx0ZXIgYm9yZGVyCvCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnw
n5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCf
kqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+S
qfCfkqnwn5Kp8J+SqfCfkqnwn5KpCvCfkqkgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCf
kqkK8J+SqSAgICAgICAgICDwn5Kp8J+SqSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5KpCvCfkqkgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICDwn5KpICAgICAgICAgICAgICAgICAgICAgICAg8J+S
qSAgICAgICAgICAgICAgICAgICAg8J+SqQrwn5KpICAgICAgICDwn5Kp8J+SqfCfkqnwn5KpICAg
ICAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICAgICAgICDwn5Kp8J+SqfCf
kqnwn5Kp8J+SqSAgICAgICAgICDwn5KpCvCfkqkgICAg8J+SqfCfkqkgICAgICAgIPCfkqkgICAg
ICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5KpICAg
ICAgICAgICAg8J+SqQrwn5KpICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICDw
n5KpICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfkqkK8J+S
qSAgICAgICAgICAgICAgICDwn5KpICAgICAgICAgICAgICAgICAg8J+SqSAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5KpCvCfkqkgICAgICAgICAgICAgICAg
8J+SqSAgICAgICAgICAgICAgICDwn5Kp8J+SqfCfkqkgICAgICAgICAgICAgICAgICAgIPCfkqkg
ICAgICAgICAgICAgICAgICAgICAg8J+SqQrwn5KpICAgICAgICAgICAgICDwn5KpICAgICAgICAg
ICAgICAgICAg8J+SqSAgICDwn5KpICAgICAgICAgICAgICAgICAg8J+SqSAgICAgICAgICAgICAg
ICAgICAgICDwn5KpCvCfkqkgICAgICAgICAgICAgIPCfkqkgICAgICAgICAgICAgICAg8J+SqSAg
ICAgIPCfkqkgICAgICDwn5KpICAgICAgICAgICAg8J+SqSAgICAgICAgICDwn5KpICAgICAgICDw
n5KpCvCfkqkgICAgICAgICAgICDwn5KpICAgICAgICAgICAgICAgICAg8J+SqSAgICAgIPCfkqkg
ICAg8J+SqSAgICAgICAgICAgICAgICDwn5Kp8J+SqfCfkqnwn5Kp8J+SqSAgICAgICAgICDwn5Kp
CvCfkqkgICAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAgIPCfkqkgICAgICAgICAg8J+SqfCf
kqkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfkqkK8J+SqSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIPCfkqkK8J+SqSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCf
kqkK8J+SqSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIPCfkqkK8J+SqfCfkqnwn5Kp8J+SqfCf
kqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+S
qfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp
8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqnwn5Kp8J+SqfCfkqkK"

WIDTH_20="LS13aWR0aCAyMAogICAgICAgIPCfkqkgICAgICAgICAgICAgICAgICAKICAgICAgICAgIPCfkqnw
n5KpICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgIPCf
kqnwn5Kp8J+SqfCfkqkgICAgICAgICAgICAKICAgIPCfkqnwn5KpICAgICAgICDwn5KpICAgICAg
ICAgIAogICAgICAgICAgICAgICAg8J+SqSAgICAgICAgICAKICAgICAgICAgICAgICAgIPCfkqkg
ICAgICAgICAgCiAgICAgICAgICAgICAgICDwn5KpICAgICAgICAgIAogICAgICAgICAgICAgIPCf
kqkgICAgICAgICAgICAKICAgICAgICAgICAgICDwn5KpICAgICAgICAgICAgCiAgICAgICAgICAg
IPCfkqkgICAgICAgICAgICAgIAogICAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAgIAog
ICAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAKICAgICAgICAgIPCfkqkgICAgICAgICAgICAg
ICAgCiAgICAgICAg8J+SqSAgICAgICAgICAgICAgICAgIAogICAgICAgIPCfkqkgICAgICAgICAg
ICAgICAgICAKICAgICAg8J+SqfCfkqnwn5KpICAgICAgICAgICAgICAgIAogICAgICDwn5KpICAg
IPCfkqkgICAgICAgICAgICAgIAogICAg8J+SqSAgICAgIPCfkqkgICAgICDwn5KpICAgICAgCiAg
ICDwn5KpICAgICAg8J+SqSAgICDwn5KpICAgICAgICAKICDwn5KpICAgICAgICAgIPCfkqnwn5Kp
ICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAg8J+SqSAgICAg
ICAgICAgICAgICAgICAgCiAgICAgICAg8J+SqfCfkqnwn5Kp8J+SqfCfkqkgICAgICAgICAgCiAg
ICAgICAgICAgICAg8J+SqSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgIPCfkqkgICAgICAgICAgICAgICAgICAg
ICAgCiAgICDwn5KpICAgICAgICAgICAgICAgICAgICAgIAogICAgICDwn5KpICAgICAgICAgIPCf
kqkgICAgICAgIAogICAgICAgIPCfkqnwn5Kp8J+SqfCfkqnwn5KpICAgICAgICAgIAogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCg=="

EQ "-w20" "$($TARGET_COMMAND -w 20|base64)" "$WIDTH_20"
EQ "--width20" "$($TARGET_COMMAND --width 20|base64)" "$WIDTH_20"

NG "--help" "$TARGET_COMMAND --help"
NG "-h" "$TARGET_COMMAND -h"
EQ "--help==-h" "$($TARGET_COMMAND --help 2>&1)" "$($TARGET_COMMAND -h 2>&1)"
EQ "ヘルプメッセージは正しいかな？" "$($TARGET_COMMAND --help |&base64)" "VXNhZ2U6IHVua28udG9pbGV0IFsgLWh2IF0gWyAtdyBvdXRwdXR3aWR0aCBdCiAgICAgICAgICAg
ICAgICAgICBbIC0tY3JvcCBdIFsgLS1mbGlwIF0gWyAtLWZsb3AgXQogICAgICAgICAgICAgICAg
ICAgWyAtLTE4MCBdIFsgLS1sZWZ0IF0gWyAtLXJpZ2h0IF0KICAgICAgICAgICAgICAgICAgIFsg
LS1ib3JkZXIgXQoKICAtaCwgLS1oZWxwICAgICAgICAgICAgICAgICAg44GT44Gu44OY44Or44OX
44KS5Ye65Yqb44GX44Gm57WC5LqG44GX44G+44GZCiAgLXcsIC0td2lkdGggPHdpZHRoLCBhdXRv
PiAgIOWHuuWKm+OBruW5heOBp+OBmeOAgmF1dG/jgpLmjIflrprjgZnjgovjgajnq6/mnKvjga7l
uYXjgavjgarjgorjgb7jgZkKICAtLWNyb3AgICAgICAgICAgICAgICAgICAgICAg5LiK5LiL5bem
5Y+z44Gu54Sh6aeE44Gq44K544Oa44O844K544KS5YmK6Zmk44GX44G+44GZCiAgLS1mbGlwICAg
ICAgICAgICAgICAgICAgICAgIOawtOW5s+aWueWQkeOBq+WPjei7ouOBl+OBvuOBmQogIC0tZmxv
cCAgICAgICAgICAgICAgICAgICAgICDlnoLnm7TmlrnlkJHjgavlj43ou6LjgZfjgb7jgZkKICAt
LTE4MCAgICAgICAgICAgICAgICAgICAgICAgMTgw5bqm5Zue6Lui44GX44G+44GZCiAgLS1sZWZ0
ICAgICAgICAgICAgICAgICAgICAgIOW3puOBuDkw5bqm5Zue6Lui44GX44G+44GZCiAgLS1yaWdo
dCAgICAgICAgICAgICAgICAgICAgIOWPs+OBuDkw5bqm5Zue6Lui44GX44G+44GZCiAgLS1ib3Jk
ZXIgICAgICAgICAgICAgICAgICAgIOaeoOe3muOCkuOBpOOBkeOBvuOBmQoK"

OK "--version" "$TARGET_COMMAND --version"
OK "-v" "$TARGET_COMMAND -v"
EQ "--version==-v" "$($TARGET_COMMAND --version)" "$($TARGET_COMMAND -v)"
EQ "バージョン情報は正しいかな？" "$($TARGET_COMMAND --version|base64)" "dW5rby50b2lsZXQgdmVyc2lvbiDwn5KpLvCfkqku8J+SqSAoMjDwn5Kp8J+SqS/wn5Kp8J+SqS/w
n5Kp8J+SqSkK"

OK "全テスト終わり💩" ":"
